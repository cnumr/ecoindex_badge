(()=>{"use strict";var e;const n="https://bff.ecoindex.fr",t=document.getElementById("ecoindex-badge"),r=null!==(e=null==t?void 0:t.getAttribute("data-theme"))&&void 0!==e?e:"light",d=window.location.href,o="light"===r?"#0d2e38":"#fff",i="light"===r?"#eee":"#0d2e38";(()=>{if(!t)return;t.style.display="none",(()=>{const e=document.getElementById("ecoindex-badge-link");e&&e.remove()})();const e=`${n}/redirect/?url=${d}`;let r="Résultat analyse écoIndex : Page non mesurée",l="badge écoIndex : page non mesurée",a="?",c="grey";fetch(`${n}/api/results/?url=${d}`,{method:"GET"}).then((e=>e.ok?e.json():new Promise(((e,n)=>n(`Erreur dans l'appel à l'écoindex de : ${d}`))))).then((e=>{const n=e["latest-result"],t=n.grade;r="Résultat analyse écoIndex : "+t,l="badge écoindex : résultat analyse = "+t,a=t,c=n.color})).catch(console.error).finally((()=>{const n=(e=>{const n=document.createElement("span");return n.setAttribute("class","ecoindex-letter"),n.append(e),n})(a),d=((e,n,t)=>{const r=document.createElement("a");return r.setAttribute("href",e),r.setAttribute("target","_blank"),r.setAttribute("rel","noreferrer"),r.setAttribute("id","ecoindex-badge-link"),r.setAttribute("title",n),r.setAttribute("aria-label",t),r.append("Ecoindex"),r})(e,r,l),s=(e=>{const n=document.createElement("style");return n.append(`\n    #ecoindex-badge {\n      width: 108px;\n      font-family: "Arial";\n    }\n    #ecoindex-badge-link {\n      border-radius: 1.3em;\n      padding: .5em .5em .5em .8em;\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      gap: 0.85em;\n      font-size: 13px;\n      background-color: ${i};\n      color: ${o};\n    }\n    #ecoindex-badge #ecoindex-badge-link span.ecoindex-letter {\n      height: 22px;\n      width: 22px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background-color: ${e};\n      color: #FFF;\n      border-radius: 50%;\n      font-size: 11px ;\n      font-weight: bold; \n    }\n    `),n})(c);d.appendChild(n),t.appendChild(s),t.appendChild(d),t.style.display=""}))})()})();